<?php
$view = $this;
$isAdmin = ($view->getHelperPluginManager()->has('userIsAllowed') && $view->userIsAllowed('Omeka\\Controller\\Admin\\Index', 'browse'));
$mediaId = $mediaId ?? '';
$videoMedia = $videoMedia ?? [];
$selectedMediaTitle = '';
foreach ($videoMedia as $media) {
    if ($mediaId == $media['id']) {
        $selectedMediaTitle = $media['title'] . ' (ID: ' . $media['id'] . ')';
        break;
    }
}
?>
<div class="field">
    <label for="media_id"><?= $this->translate('Select Video') ?></label>
    <input type="hidden" name="o:block[__blockIndex__][o:data][media_id]" class="media-id" id="media_id" value="<?= $mediaId ?>">
    <button type="button" class="select-media button"><?= $this->translate('Select Video') ?></button>
    <span class="selected-media" style="margin-left:1em;">
        <?= $selectedMediaTitle ?: $this->translate('No video selected') ?>
    </span>
    <div class="field-description">
        <?= $this->translate('Choose a video from your Omeka S media library.') ?>
    </div>
</div>
<div class="field">
    <label for="percent"><?= $this->translate('Thumbnail Position (%)') ?></label>
    <input type="number" name="o:block[__blockIndex__][o:data][percent]" min="0" max="100" value="<?= $percent ?? 10 ?>">
    <div class="field-description">
        <?= $this->translate('Percent into the video to extract the thumbnail (0-100).') ?>
    </div>
</div>
<?php if (empty($mediaId)): ?>
<div class="block-message warning">
    <?= $this->translate('No video selected. Please select a video to display its thumbnail.') ?>
</div>
<?php endif; ?>
<div style="background:#ffc;padding:4px 8px;margin:8px 0;">VideoThumbnail block form rendered</div>
